---
layout: post
title: Re:Invent Yourself and Your Company With Serverless
date: 2020-03-25
tags: s3 aws security tutorial
author: Matthew Tyler
image: img/reinvent.png
---

<center><img src="/img/reinvent.png" /></center>
<br/>

# Introduction

S3 was the first service to become generally available (GA) in AWS, debuting in 2006. It would be fair to say that since then it has become an essentially building block of the internet having become the foundation for many services both internally within AWS and externally by service providers. No service lasts for 14 years (as of now, it's 2020) and doesn't accumulate some level of baggage, and there are probably a few developers out there who would liken dealing with the myriad of S3 access mechanisms as being akin to dealing with a moody teenager. I deal with S3 on an almost daily basis, and have a boatload of relevant AWS certifications - and I still regularly get tripped up when dealing with S3. With that in mind, I've decided to take the time write out how S3 policies work, with extra attention to my method of determining the access level.

# Terminology

ACL

Policy

Action

Effect

Resource

Principal

Condition

Canonical ID

'Public' Bucket

# Public Access Restrictions

## What is Public Access?

# S3 ACLs

# Resource Policies

# IAM Policies

# Access Points

# Evaluating Multiple Policies

It's a little confusing to understand how all of these policies apply

1. Are block-public-access restrictions enabled?

If your accessing the bucket publicly, and these are enabled, stop now. You can't access it. If only a couple of them are, you'll need to scrub out the associated policy (assuming it is an 'Allow' policy) and evaluated the remaining policies.

2. Check if anything has an explicit deny.

If even /one/ thing, no matter what it is, matches a deny condition for the principal, they will be denied access to the bucket.

3. Check if anything has an explicit allow.

As long as there are no matching 'deny' statements, and at least one allow statement, the principal will be allowed to access the bucket.

4. No explicit-allow anywhere?

The principal will be denied access to the bucket.

# Scenarios

## Create a bucket without changing it?

- Giving access cross account?
- Giving access to a role within an account




https://docs.aws.amazon.com/AmazonS3/latest/dev/access-control-block-public-access.html

? [Contact Mechanical Rock to Get Started!](https://www.mechanicalrock.io/lets-get-started)